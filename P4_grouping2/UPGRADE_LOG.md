# 萬鶴書院 HKDSE英語口語考試分組系統 - 升級版

## 🎉 版本更新說明

**版本：** v2.0  
**更新日期：** 2026年2月  
**更新內容：** 新增批次控制、抽籤動畫、數據保存功能

---

## ✨ 新增功能

### 1️⃣ 批次顯示控制 ⭐⭐⭐

**功能描述：**  
解決了學生提前知道分組的問題。現在每個考場的分組會按批次逐一顯示，只有當前批次的考生才會看到自己的分組信息。

**如何使用：**
- 抽籤完成後，系統默認只顯示第1批學生
- 在結果頁面底部有批次控制按鈕：
  - **「← 上一批」** - 返回查看前一批
  - **「下一批 →」** - 顯示下一批學生
  - 中間顯示當前批次進度（例：當前批次：2 / 4）
- 未公佈的批次完全隱藏，學生無法提前看到

**優點：**
- ✅ 保護考試公平性
- ✅ 防止學生提前知道組員
- ✅ 有序進行考試流程
- ✅ 可自由前後翻看已公佈的批次

**示例場景：**
```
考場1有4組學生：
- 批次1：第1組（當前顯示）
- 批次2：第4組（隱藏）
- 批次3：第7組（隱藏）
- 批次4：第10組（隱藏）

點擊「下一批」後：
- 批次1：第1組（已顯示）
- 批次2：第4組（當前顯示）✨
- 批次3：第7組（仍隱藏）
- 批次4：第10組（仍隱藏）
```

---

### 2️⃣ 抽籤動畫效果 🎬

**功能描述：**  
點擊「開始抽籤分組」後，會先顯示一個精美的抽籤動畫頁面（約1.8秒），增強儀式感和隨機性的視覺呈現。

**動畫內容：**
- 📍 萬鶴書院Logo（脈動動畫）
- 📍 「正在進行抽籤分組...」標題
- 📍 旋轉的圓形Spinner（金黃色）
- 📍 快速滾動的學生姓名（隨機顯示）
- 📍 「請稍候，系統正在隨機分配中」提示文字

**視覺效果：**
- Logo呼吸式放大縮小
- 圓形加載器順時針旋轉
- 學生姓名快速閃爍切換（製造隨機抽取的感覺）
- 漸變紫色背景

**用戶體驗：**
- ✅ 增加抽籤的儀式感
- ✅ 視覺上強化隨機性
- ✅ 緩解用戶等待焦慮
- ✅ 提升整體專業度

---

### 3️⃣ Cookie數據保存 💾

**功能描述：**  
系統會自動保存所有輸入的數據和分組結果到瀏覽器Cookie，即使意外刷新頁面或關閉瀏覽器，數據也不會丟失。

**保存的數據包括：**
- 📌 學生名單
- 📌 考場數量
- 📌 各考場負責老師姓名
- 📌 分組結果
- 📌 當前顯示的批次

**工作原理：**

1. **實時保存**
   - 每次輸入學生名單時自動保存
   - 修改考場數量時自動保存
   - 填寫教師姓名時自動保存
   - 完成抽籤後保存結果

2. **自動恢復**
   - 重新打開頁面時自動恢復上次的數據
   - 意外刷新頁面後繼續顯示分組結果
   - 瀏覽器前進/後退按鈕不影響數據

3. **數據過期**
   - Cookie有效期：7天
   - 7天後自動清除（可手動清空）

**手動清空數據：**
- 點擊設置頁面的「清空數據」按鈕
- 系統會彈出確認對話框
- 確認後清除所有保存的數據

**優點：**
- ✅ 防止意外丟失數據
- ✅ 可中斷後繼續操作
- ✅ 支持多次查看結果
- ✅ 提升用戶體驗

---

## 🎨 界面更新

### 新增按鈕

1. **清空數據按鈕**（設置頁面）
   - 位置：「開始抽籤分組」按鈕左側
   - 樣式：白色背景，紫色邊框
   - 功能：清除所有保存的數據

2. **批次控制按鈕**（結果頁面）
   - 位置：結果頁面底部
   - 樣式：金黃色漸變按鈕
   - 功能：上一批/下一批切換

### 新增頁面

**抽籤動畫頁面**
- 全屏顯示
- 紫色漸變背景
- 居中佈局
- 動態動畫效果

---

## 📖 完整使用流程

### 步驟1：輸入基本信息
1. 複製粘貼學生名單（每行一個姓名）
2. 選擇考場數量（2-4個）
3. 填寫每個考場的負責老師姓名
4. 系統自動保存輸入的數據

### 步驟2：開始抽籤
1. 點擊「開始抽籤分組」按鈕
2. 觀看抽籤動畫（約1.8秒）
3. 系統隨機打亂學生順序並智能分組

### 步驟3：查看結果（批次控制）
1. 初始顯示第1批學生分組
2. 考場大屏幕公佈第1批考生信息
3. 第1批考試結束後，點擊「下一批 →」
4. 顯示第2批學生分組
5. 重複步驟4，直到所有批次考試完成

### 步驟4：數據管理
- **繼續查看**：刷新頁面後自動恢復結果
- **重新分組**：點擊「返回重新分組」
- **清空數據**：點擊「清空數據」按鈕

---

## 🔧 技術特點

### Cookie管理
- 使用原生JavaScript操作Cookie
- JSON格式序列化數據
- URL編碼避免特殊字符問題
- 7天自動過期機制

### 批次邏輯
- 每個小組標記批次號（batchNumber）
- CSS類控制顯示/隱藏（batch-hidden）
- 按鈕狀態智能控制（disabled）
- 批次信息實時更新

### 動畫實現
- CSS動畫（@keyframes）
- 旋轉、脈動、淡入淡出效果
- setTimeout定時器控制流程
- setInterval實現文字滾動

---

## 📊 批次分配邏輯

系統將小組按順序分配到各個考場，每個考場的小組對應一個批次：

**示例：10組學生，3個考場**

| 考場 | 批次1 | 批次2 | 批次3 | 批次4 |
|------|-------|-------|-------|-------|
| 考場1 | 第1組 | 第4組 | 第7組 | 第10組|
| 考場2 | 第2組 | 第5組 | 第8組 | -     |
| 考場3 | 第3組 | 第6組 | 第9組 | -     |

- 每個批次同時進行3個考場的考試
- 考場1有4個批次，考場2和3各有3個批次
- 總共需要4個批次完成所有考試

---

## 🎯 應用場景

### 標準流程
1. 考試開始前，工作人員設置系統
2. 連接到1920×1080大屏幕
3. 輸入學生名單和考場信息
4. 進行抽籤，公佈第1批學生
5. 第1批學生進入考場準備
6. 考試結束後，公佈第2批
7. 重複直到所有學生考完

### 優勢對比

**❌ 傳統方式的問題：**
- 一次性公佈所有分組 → 學生提前知道組員
- 手動抽籤效率低 → 耗時且容易出錯
- 紙質名單易丟失 → 無法保存記錄

**✅ 本系統的優勢：**
- 批次逐一公佈 → 保護考試公平性
- 自動隨機分組 → 快速且準確
- 數據自動保存 → 可追溯可恢復

---

## ⚙️ 系統要求

- **瀏覽器：** Chrome、Firefox、Safari、Edge（現代瀏覽器）
- **分辨率：** 建議1920×1080（大屏顯示最佳）
- **網絡：** 無需網絡（純前端運行）
- **Cookie：** 需啟用Cookie功能

---

## 📦 文件說明

```
vanhok-exam-grouping/
├── index.html       # 主頁面（包含3個頁面：設置、動畫、結果）
├── styles.css       # 樣式表（新增動畫和批次樣式）
├── script.js        # 核心邏輯（新增Cookie管理和批次控制）
├── demo.html        # 系統演示頁面
└── README.md        # 詳細說明文檔
```

---

## 🐛 常見問題

**Q1：刷新頁面後數據會丟失嗎？**  
A1：不會！系統使用Cookie自動保存所有數據，刷新後自動恢復。

**Q2：如何清空之前的數據重新開始？**  
A2：點擊設置頁面的「清空數據」按鈕，確認後即可清空。

**Q3：批次顯示控制的作用是什麼？**  
A3：防止學生提前知道後續批次的分組信息，保護考試公平性。

**Q4：抽籤動畫可以跳過嗎？**  
A4：動畫固定1.8秒，不可跳過。這是為了增強隨機性的視覺效果。

**Q5：Cookie數據會在其他電腦上同步嗎？**  
A5：不會。Cookie保存在本地瀏覽器，不同電腦的數據是獨立的。

**Q6：可以返回修改學生名單嗎？**  
A6：可以。點擊「返回重新分組」，然後修改名單後重新抽籤。

**Q7：如果考場數量不同，批次會不平均嗎？**  
A7：是的。系統輪流分配小組，部分考場可能比其他考場多一個批次。

---

## 📞 技術支持

如有任何問題或建議，請聯繫系統開發團隊。

---

**版本歷史：**
- v1.0（2026-02-06）：初始版本，基礎分組功能
- v2.0（2026-02-06）：新增批次控制、抽籤動畫、Cookie保存

**© 2026 萬鶴書院 Vanhok Academy**